(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(f){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.runtimes.Flash=c.addRuntime("flash",{init:function(g,l){var k,f,h,e,m=0,d=document.body;if(b()<10){l({success:false});return}a[g.id]=g;k=document.getElementById(g.settings.browse_button);f=document.createElement("div");f.id=g.id+"_flash_container";c.extend(f.style,{position:"absolute",top:"0px",background:g.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"});f.className="plupload flash";if(g.settings.container){d=document.getElementById(g.settings.container);d.style.position="relative"}d.appendChild(f);h="id="+escape(g.id);f.innerHTML='<object id="'+g.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+g.settings.flash_swf_url+'"><param name="movie" value="'+g.settings.flash_swf_url+'" /><param name="flashvars" value="'+h+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function j(){return document.getElementById(g.id+"_flash")}function i(){if(m++>5000){l({success:false});return}if(!e){setTimeout(i,1)}}i();k=f=null;g.bind("Flash:Init",function(){var q={},o,p=g.settings.filters,n=g.settings.resize||{};e=true;for(o=0;o<p.length;o++){p[o].extensions="*."+p[o].extensions.replace(/,/g,";*.")}j().setFileFilters(p,g.settings.multi_selection);g.bind("UploadFile",function(r,s){var t=r.settings;j().uploadFile(q[s.id],c.buildUrl(t.url,{name:s.target_name||s.name}),{chunk_size:t.chunk_size,width:n.width,height:n.height,quality:n.quality||90,multipart:t.multipart,multipart_params:t.multipart_params,format:/\.(jpg|jpeg)$/i.test(s.name)?"jpg":"png"})});g.bind("Flash:UploadProcess",function(s,r){var t=s.getFile(q[r.id]);if(t.status!=c.FAILED){t.loaded=r.loaded;t.size=r.size;s.trigger("UploadProgress",t)}});g.bind("Flash:UploadChunkComplete",function(r,t){var u,s=r.getFile(q[t.id]);u={chunk:t.chunk,chunks:t.chunks,response:t.text};r.trigger("ChunkUploaded",s,u);if(s.status!=c.FAILED){j().uploadNextChunk()}if(t.chunk==t.chunks-1){s.status=c.DONE;r.trigger("FileUploaded",s,{response:t.text})}});g.bind("Flash:SelectFiles",function(r,u){var t,s,v=[],w;for(s=0;s<u.length;s++){t=u[s];w=c.guid();q[w]=t.id;q[t.id]=w;v.push(new c.File(w,t.name,t.size))}if(v.length){g.trigger("FilesAdded",v)}});g.bind("Flash:SecurityError",function(r,s){g.trigger("Error",{code:c.SECURITY_ERROR,message:"Security error.",details:s.message,file:g.getFile(q[s.id])})});g.bind("Flash:GenericError",function(r,s){g.trigger("Error",{code:c.GENERIC_ERROR,message:"Generic error.",details:s.message,file:g.getFile(q[s.id])})});g.bind("Flash:IOError",function(r,s){g.trigger("Error",{code:c.IO_ERROR,message:"IO error.",details:s.message,file:g.getFile(q[s.id])})});g.bind("QueueChanged",function(r){g.refresh()});g.bind("FilesRemoved",function(r,t){var s;for(s=0;s<t.length;s++){j().removeFile(q[t[s].id])}});g.bind("StateChanged",function(r){g.refresh()});g.bind("Refresh",function(r){var s,t,u;s=document.getElementById(r.settings.browse_button);t=c.getPos(s,document.getElementById(r.settings.container));u=c.getSize(s);c.extend(document.getElementById(r.id+"_flash_container").style,{top:t.y+"px",left:t.x+"px",width:u.w+"px",height:u.h+"px"})});l({success:true})})}})})(plupload);