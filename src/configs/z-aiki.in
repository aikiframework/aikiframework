# @PACKAGE@ - web framework written in php

# Copyright (c) 2010-2011 Aiki Lab Pte Ltd

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as
# published by the Free Software Foundation, either version 3 of the
# License, or (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.

# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

# Written by Bassel Safadi, Steven Garcia

Alias @AIKI_REWRITE_BASE@ @PKG_DATA_DIR@

# The following directories require access over HTTP
<Directory @PKG_DATA_DIR@/>
    Order Allow,Deny
    Allow from All
    Deny from None
    AllowOverride All
    Options +FollowSymLinks
    RewriteEngine on
    RewriteBase @AIKI_REWRITE_BASE@/
    RewriteRule ^image/(.*)px/(.*)/(.*) assets/apps/image_viewer.php?id=$3&size=$1&mode=$2
    RewriteRule ^image/(.*)px/(.*) assets/apps/image_viewer.php?id=$2&size=$1
    RewriteRule ^image/(.*) assets/apps/image_viewer.php?id=$1
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{SCRIPT_FILENAME} !-d
    RewriteCond %{SCRIPT_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?pretty=$1 [L,QSA]
    <IfModule mod_suphp.c>
        suPHP_AddHandler php5-script
        suPHP_Engine @SUPHP_ENGINE@
        # Directory php.ini is in
        suPHP_ConfigPath /etc
    </IfModule>
</Directory>
